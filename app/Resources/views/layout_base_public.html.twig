<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-signin-client_id"
          content="{{ g_app_id }}">
    <title> {{ site_name }}</title>
    <link rel="icon" type="image/x-icon" href="{{ asset('bundles/app/img/favicon.png') }}" />
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.6 -->
    <link rel="stylesheet" href="{{ asset('bundles/app/bootstrap/css/bootstrap.min.css') }}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <!-- DataTables -->
    <link rel="stylesheet" href="{{ asset('bundles/app/plugins/datatables/dataTables.bootstrap.css') }}">
    <!-- Select2 -->
    <link rel="stylesheet" href="{{ asset('bundles/app/plugins/select2/select2.min.css') }}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{{ asset('bundles/app/AdminLTE-2.3.5/css/AdminLTE.min.css') }}">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
         folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="{{ asset('bundles/app/AdminLTE-2.3.5/css/skins/_all-skins.min.css') }}">

    <!-- Date Picker -->
    <link rel="stylesheet" href="{{ asset('bundles/app/plugins/datepicker/datepicker3.css') }}">
    <!-- Daterange picker -->
    <link rel="stylesheet" href="{{ asset('bundles/app/plugins/daterangepicker/daterangepicker.css') }}">
    <!-- Bootstrap time Picker -->
    <link rel="stylesheet" href="{{ asset('bundles/app/plugins/timepicker/bootstrap-timepicker.min.css') }}">
    <link rel="stylesheet" href="{{ asset('bundles/app/css/public.css') }}">
    <link rel="stylesheet" href="{{ asset('bundles/app/css/evenprom/style.css') }}">

    {% block stylesheets %}
    {% endblock %}

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
{% trans_default_domain "app" %}
<!-- ADD THE CLASS layout-top-nav TO REMOVE THE SIDEBAR. -->
<body class="hold-transition skin-blue layout-top-nav fixed">
<div id="modal-alert" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Atenci√≥n</h4>
            </div>
            <div class="modal-body">


            </div>
            <div class="hidden">
            </div>
            <div class="modal-footer">

                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            </div>
        </div>

    </div>
</div>
<div class="wrapper">

    <header class="main-header">
        <nav class="navbar navbar-static-top">
            <div class="container">
                <div class="navbar-header">
                    <a href="{{ path('app_homepage') }}" class="navbar-brand">
                        <b>
                            <span class="ep-celeste">Even</span><span class="ep-fucsia">Prom</span>
                        </b>
                    </a>
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                            data-target="#navbar-collapse">
                        <i class="fa fa-bars"></i>
                    </button>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                    <ul class="nav navbar-nav">
                        {#<li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li>#}
                        {#<li class="active"></li>#}
                        <li class=""><a href="{{ path('sitios_index') }}">{{ 'Sitios' |trans }}</a></li>

                    </ul>
                    {#<form class="navbar-form navbar-center" role="search">#}
                    {#<div class="form-group">#}
                    {#<input type="text" class="form-control" id="navbar-search-input" placeholder="Search">#}
                    {#</div>#}
                    {#</form>#}
                </div>
                <!-- /.navbar-collapse -->
                <!-- User Account Menu -->
                <div class="navbar-custom-menu">
                    <ul class="nav navbar-nav">
                        {% if is_granted("ROLE_PERSONA") %}
                            {% include 'userPersonaDropdown.html.twig' %}
                        {% else %}
                            <li class="user user-menu">
                                <a href="{{ path('fos_user_security_login') }}" class="dropdown-toggle">
                                    <span class="hidden-xs">{{ 'login' | trans }}</span>
                                </a>
                            </li>
                            <li class="user user-menu">
                                <a href="{{ path('persona_registrar') }}" class="dropdown-toggle">
                                    <span class="hidden-xs">{{ 'button.register' | trans }}</span>
                                </a>
                            </li>
                        {% endif %}
                    </ul>
                </div>
                <!-- /.navbar-custom-menu -->
            </div>
            <!-- /.container-fluid -->
        </nav>
    </header>
    <!-- Full Width Column -->
    <div class="content-wrapper">
        <div class="container">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>
                    {#Top Navigation#}
                    {#<small>Example 2.0</small>#}
                </h1>

            </section>

            <!-- Main content -->
            <section class="content">
                {% block content %}
                {% endblock content %}
            </section>
            <!-- /.content -->
        </div>
        <!-- /.container -->
    </div>
    <!-- /.content-wrapper -->
    <footer class="main-footer">
        <div class="container">
            <div class="pull-right hidden-xs">
                <b>Version</b> {{ version }}
            </div>
            <strong>Copyright &copy; 2016 <a href="http://evenprom.com">{{ site_name }}</a>.</strong> All
            rights
            reserved.
        </div>
        <!-- /.container -->
    </footer>
</div>
<!-- ./wrapper -->

<!-- jQuery 2.2.3 -->
<script src="{{ asset('bundles/app/plugins/jQuery/jquery-2.2.3.min.js') }}"></script>
<!-- Bootstrap 3.3.6 -->
<script src="{{ asset('bundles/app/bootstrap/js/bootstrap.min.js') }}"></script>
<!-- DataTables -->
<script src="{{ asset('bundles/app/plugins/datatables/jquery.dataTables.min.js') }}"></script>
<script src="{{ asset('bundles/app/plugins/datatables/dataTables.bootstrap.min.js') }}"></script>
<!-- daterangepicker -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
<script src="{{ asset('bundles/app/plugins/daterangepicker/daterangepicker.js') }}"></script>
<!-- datepicker -->
<script src="{{ asset('bundles/app/plugins/datepicker/bootstrap-datepicker.js') }}"></script>
<!-- datepicker locales-->
{% if app.request.locale != 'en' %}
    <script src="{{ asset('bundles/app/plugins/datepicker/locales/bootstrap-datepicker.'~ app.request.locale ~'.js') }}"></script>
{% endif %}
<!-- bootstrap time picker -->
<script src="{{ asset('bundles/app/plugins/timepicker/bootstrap-timepicker.min.js') }}"></script>
<!-- SlimScroll -->
<script src="{{ asset('bundles/app/plugins/slimScroll/jquery.slimscroll.min.js') }}"></script>
<!-- blockUI -->
<script src="{{ asset('bundles/util/js/jquery.blockUI.js') }}"></script>
<!-- Select2 -->
<script src="{{ asset('bundles/app/plugins/select2/select2.full.min.js') }}"></script>
<!-- FastClick -->
<script src="{{ asset('bundles/app/plugins/fastclick/fastclick.js') }}"></script>
<!-- AdminLTE App -->
<script src="{{ asset('bundles/app/AdminLTE-2.3.5/js/app.min.js') }}"></script>
<!-- AdminLTE for demo purposes -->
{#<script src="../../dist/js/demo.js"></script>#}

{# global sets #}
<script>
    twigLocale = "{{ app.request.locale }}";
</script>
<script src="{{ asset('bundles/app/js/app.js') }}"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<script src="https://apis.google.com/js/client.js"></script>

<script>
    $(document).ready(function () {
        $.getScript('//connect.facebook.net/en_US/sdk.js', function () {
            FB.init({
                appId: '{{ fb_app_id }}',
                status: true,
                xfbml: true,
                version: 'v2.7' // or v2.6, v2.5, v2.4, v2.3
            });

            {% if app.user and app.user.facebookAccessToken %}

            FB.api('/me', {
                access_token: '{{ app.user.facebookAccessToken }}',
                fields: 'first_name,last_name,id,picture'
            }, function (response) {
//                console.log(response);
                FB.api('/' + response.id + '/picture?type=large', {
                    access_token: '{{ app.user.facebookAccessToken }}'
                }, function (responsePhoto) {
//                    console.log('responsePhoto', responsePhoto);
                    $(".user-image").attr("src", responsePhoto.data.url);
                })


            });
            {% endif %}

        });

//        acciones publicaciones
        $('.ep-btn-oferta-compartir').click(function (ev) {
            ev.preventDefault();

            var href = $(this).data('href');
            var image = $(this).data('image');
            var name = $(this).data('name');
            console.log(image);
            FB.ui({
                method: 'feed',
                name: name,
                link: href,
                picture: image,
                caption: 'evenprom.com',

//                method: 'feed',
//                display: 'popup',
//                link: href,
//                picture: image
            }, function (response) {
            });


            console.log("pubID", $(this).data('publicacion-id'));
        })


    });

</script>

<script src="https://apis.google.com/js/api.js"></script>
<script>
    {% if app.user and app.user.googleAccessToken %}
    function initClient() {
        gapi.client.init({
            apiKey: '{{ g_api_key }}',
            discoveryDocs: ["https://people.googleapis.com/$discovery/rest?version=v1"],
            clientId: '{{ g_app_id }}',
            scope: 'profile'
        }).then(function () {

            return gapi.client.people.people.get({
                access_token: "{{ app.user.googleAccessToken }}",
                resourceName: 'people/me'
            });
        }).then(function (resp) {
//            console.log(resp.result);
//            console.log("resp", resp);
            $(".user-image").attr("src", resp.result.photos[0].url);
            console.log("resp.result", resp.result);
        }, function (reason) {
            console.log('Error: ' + reason);
//            console.log('Error: ' + reason.result.error.message);
        });
        ;
    }

    // 1. Load the JavaScript client library.
    gapi.load('client', initClient);
    {% endif %}
</script>
<script type="text/javascript" async src="https://platform.twitter.com/widgets.js"></script>

{% block javascripts %}
{% endblock javascripts %}
</body>
</html>